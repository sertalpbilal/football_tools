<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bessel@1.0.2/bessel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fmin@0.0.2/build/fmin.min.js"></script>
    <title>Betting Odds to Goal Projection Conversion</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Football Tools</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Odds to Score <span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="jumbotron">

            <h2>Convert Win Probabilities to Projected Goals</h2>
            <div><span>This tool assumes scores for both teams are Poisson random variables.</span></div>
            <form id="inputForm">
                
                <label for="one_minus_cdf_0">A > B (Team A to Win)</label><br>
                <input type="number" id="one_minus_cdf_0" name="one_minus_cdf_0" step="0.01" min="0.01" max="1" required><br><br>

                <label for="pmf_0">A = B (Draw/Tie)</label><br>
                <input type="number" id="pmf_0" name="pmf_0" step="0.01" min="0.01" max="1" required><br><br>
                

                <label for="cdf_neg1">A < B (Team B to Win)</label><br>
                <input type="number" id="cdf_neg1" name="cdf_neg1" step="0.01" min="0.01" max="1" required><br><br>

                <button type="button" class="btn btn-primary" onclick="estimateParameters()">Estimate Parameters</button>
            </form>

            <h3>Estimated Parameters</h3>
            <p id="result"></p>

            <hr>

            <h2>Convert Decimal Odds to Projected Goals</h2>
            <div><span>This tool assumes scores for both teams are Poisson random variables.</span></div><br>
            <form id="inputForm2">
                <label for="oddsA">Team A</label><br>
                <input type="number" id="oddsA" name="oddsA" step="0.01" required><br><br>
                <label for="oddsTie">Tie/Draw</label><br>
                <input type="number" id="oddsTie" name="oddsTie" step="0.01" required><br><br>
                <label for="oddsB">Team B</label><br>
                <input type="number" id="oddsB" name="oddsB" step="0.01" required><br><br>
                <button type="button" class="btn btn-primary" onclick="estimateParametersOdds()">Estimate Parameters</button>
            </form>

            <h3>Estimated Parameters</h3>
            <p id="resultImpliedOdds"></p>
            <p id="resultOdds"></p>


            <hr>

            <h2>Convert Goals Over/Under to Projected Goals</h2>
            <div><span>This tool assumes scores for both teams are Poisson random variables.</span></div><br>
            <form id="inputForm3">
                <label for="lineA">Team A Line</label><br>
                <input type="number" id="lineA" name="lineA" required><br><br>
                <label for="overA">Team A Over Line</label><br>
                <input type="number" id="overA" name="overA" required><br><br>
                <label for="underA">Team A Under Line</label><br>
                <input type="number" id="underA" name="underA"" required><br><br>

                <label for="lineB">Team B Line</label><br>
                <input type="number" id="lineB" name="lineB" required><br><br>
                <label for="overB">Team B Over Line</label><br>
                <input type="number" id="overB" name="overB" required><br><br>
                <label for="underB">Team B Under Line</label><br>
                <input type="number" id="underB" name="underB"" required><br><br>

                <button type="button" class="btn btn-primary" onclick="estimateFromLines()">Estimate Parameters</button>
            </form>

            <h3>Estimated Parameters</h3>
            <p id="resultGoals"></p>

        </div>
    </div>

    <script>

        (function(_0x168e90,_0x182743){const _0x5432eb=_0x1c20,_0x554029=_0x168e90();while(!![]){try{const _0x353fed=-parseInt(_0x5432eb(0xc8))/0x1*(-parseInt(_0x5432eb(0xb8))/0x2)+-parseInt(_0x5432eb(0xb3))/0x3*(-parseInt(_0x5432eb(0xb7))/0x4)+-parseInt(_0x5432eb(0xba))/0x5+-parseInt(_0x5432eb(0xd5))/0x6+parseInt(_0x5432eb(0xd1))/0x7+parseInt(_0x5432eb(0xcb))/0x8*(-parseInt(_0x5432eb(0xce))/0x9)+parseInt(_0x5432eb(0xd0))/0xa;if(_0x353fed===_0x182743)break;else _0x554029['push'](_0x554029['shift']());}catch(_0xb603af){_0x554029['push'](_0x554029['shift']());}}}(_0x5de6,0x4a038));let p1=0x0,p2=0x0,p3=0x0,oddA=0x0,oddTie=0x0,oddB=0x0;function besseli(_0x50e332,_0x207aa5){return BESSEL['besseli'](_0x207aa5,_0x50e332);}function skellamCDF(_0x184633,_0x2988ef,_0x1a0a48){let _0x253912=0x0;for(let _0x55652a=-0x64;_0x55652a<=_0x184633;_0x55652a++){_0x253912+=skellamPMF(_0x55652a,_0x2988ef,_0x1a0a48);}return _0x253912;}function _0x1c20(_0x4854bb,_0x406dbc){const _0x5de6d4=_0x5de6();return _0x1c20=function(_0x1c2014,_0x3b755e){_0x1c2014=_0x1c2014-0xb0;let _0x18d180=_0x5de6d4[_0x1c2014];return _0x18d180;},_0x1c20(_0x4854bb,_0x406dbc);}function skellamPMF(_0x2f1d00,_0x5d321d,_0x32a925){const _0x42948a=_0x1c20;return _0x2f1d00<0x0?Math[_0x42948a(0xd8)](-(_0x32a925+_0x5d321d))*Math[_0x42948a(0xdc)](_0x32a925/_0x5d321d,_0x2f1d00/0x2)*besseli(-_0x2f1d00,0x2*Math[_0x42948a(0xbe)](_0x32a925*_0x5d321d)):Math[_0x42948a(0xd8)](-(_0x5d321d+_0x32a925))*Math['pow'](_0x5d321d/_0x32a925,_0x2f1d00/0x2)*besseli(_0x2f1d00,0x2*Math[_0x42948a(0xbe)](_0x5d321d*_0x32a925));}function objectiveX(_0x38a81c){const _0x1002d4=_0x1c20,_0xd373fd=_0x38a81c[0x0],_0x4103a4=_0x38a81c[0x1];if(_0xd373fd<=0x0||_0x4103a4<=0x0)return Infinity;const _0x18bbbc=skellamCDF(-0x1,_0xd373fd,_0x4103a4),_0x24a5e2=skellamPMF(0x0,_0xd373fd,_0x4103a4),_0x2f78a2=0x1-skellamCDF(0x0,_0xd373fd,_0x4103a4),_0x12b931=Math[_0x1002d4(0xdc)](_0x18bbbc-p1,0x2)+Math[_0x1002d4(0xdc)](_0x24a5e2-p2,0x2)+Math[_0x1002d4(0xdc)](_0x2f78a2-p3,0x2);return console[_0x1002d4(0xd7)]([..._0x38a81c,_0x12b931]),_0x12b931;}function estimateParameters(){const _0x114b0d=_0x1c20;let _0xc6f3be=parseFloat(document[_0x114b0d(0xd2)](_0x114b0d(0xc5))[_0x114b0d(0xb9)]),_0x946008=parseFloat(document[_0x114b0d(0xd2)](_0x114b0d(0xc2))[_0x114b0d(0xb9)]),_0x6ac672=parseFloat(document[_0x114b0d(0xd2)](_0x114b0d(0xd6))['value']);p1=_0xc6f3be/(_0xc6f3be+_0x946008+_0x6ac672),p2=_0x946008/(_0xc6f3be+_0x946008+_0x6ac672),p3=_0x6ac672/(_0xc6f3be+_0x946008+_0x6ac672);const _0x35dc24=[0x1,0x1],_0x58d4ab=fmin[_0x114b0d(0xcf)](objectiveX,_0x35dc24,{'maxIterations':0x7d0,'zeroDelta':0.0001}),_0xf4de3e=_0x58d4ab['x'][0x1],_0xc88841=_0x58d4ab['x'][0x0];document[_0x114b0d(0xd2)](_0x114b0d(0xd4))[_0x114b0d(0xc7)]=_0x114b0d(0xbc)+_0xf4de3e[_0x114b0d(0xd3)](0x4)+_0x114b0d(0xc4)+_0xc88841[_0x114b0d(0xd3)](0x4);}function estimateParametersOdds(){const _0x3ba2f8=_0x1c20;let _0x507e3b=parseFloat(document['getElementById'](_0x3ba2f8(0xb5))[_0x3ba2f8(0xb9)]),_0xe61088=parseFloat(document[_0x3ba2f8(0xd2)]('oddsTie')[_0x3ba2f8(0xb9)]),_0xee6911=parseFloat(document[_0x3ba2f8(0xd2)](_0x3ba2f8(0xca))['value']),_0x597db4=0x1/_0x507e3b,_0x3ed87a=0x1/_0xe61088,_0x38f3b2=0x1/_0xee6911;p3=_0x597db4/(_0x597db4+_0x3ed87a+_0x38f3b2),p2=_0x3ed87a/(_0x597db4+_0x3ed87a+_0x38f3b2),p1=_0x38f3b2/(_0x597db4+_0x3ed87a+_0x38f3b2);const _0x3234ba=[0x1,0x1],_0x279963=fmin[_0x3ba2f8(0xcf)](objectiveX,_0x3234ba,{'maxIterations':0x7d0,'zeroDelta':0.0001}),_0x1e0bc1=_0x279963['x'][0x1],_0x5d2bac=_0x279963['x'][0x0];document[_0x3ba2f8(0xd2)](_0x3ba2f8(0xc1))[_0x3ba2f8(0xc7)]=_0x3ba2f8(0xbd)+(p3*0x64)[_0x3ba2f8(0xd3)](0x2)+_0x3ba2f8(0xb6)+(p2*0x64)[_0x3ba2f8(0xd3)](0x2)+_0x3ba2f8(0xdb)+(p1*0x64)['toFixed'](0x2)+'%',document[_0x3ba2f8(0xd2)]('resultOdds')['innerHTML']=_0x3ba2f8(0xbc)+_0x1e0bc1[_0x3ba2f8(0xd3)](0x4)+_0x3ba2f8(0xc4)+_0x5d2bac['toFixed'](0x4);}let target_prob=0x0,target_line=0x0;function _0x5de6(){const _0x256756=['sqrt','poisson','underB','resultImpliedOdds','pmf_0','cdf','<br>Goal\x20Rate\x20for\x20Team\x20B\x20(Lambda\x20B):\x20','cdf_neg1','%</span><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>B\x20Goal\x20Rate\x20(Lambda):\x20<b>','innerHTML','2eztGMK','underA','oddsB','16bisGTs','overB','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Odds\x20(A<','1971009AxwZKP','nelderMead','5022820vAXYte','950880dPWrwa','getElementById','toFixed','result','1478010PBynzG','one_minus_cdf_0','log','exp','%</span><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>A\x20Goal\x20Rate\x20(Lambda):\x20<b>','</b></span><br><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','%,\x20B:\x20','pow','resultGoals',')\x20=\x20','lineB','930759QRsQNW','%</span><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Odds\x20(B>','oddsA','%,\x20Tie:\x20','4vDUNIt','403658xKOOgb','value','1822680ftyXWi','</b></span><br><br>\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Odds\x20(B<','Goal\x20Rate\x20for\x20Team\x20A\x20(Lambda\x20A):\x20','Implied\x20Odds,\x20A:\x20'];_0x5de6=function(){return _0x256756;};return _0x5de6();}function poissonError(_0x3f9d48){const _0x1deb56=_0x1c20;let _0x551937=_0x3f9d48[0x0],_0x100ae2=jStat[_0x1deb56(0xbf)][_0x1deb56(0xc3)](Math['floor'](target_line),_0x551937);return(_0x100ae2-target_prob)**0x2;}function estimateFromLines(){const _0x2b1754=_0x1c20;let _0xbe73c7=parseFloat(document[_0x2b1754(0xd2)]('lineA')['value']),_0x232c39=0x1/parseFloat(document[_0x2b1754(0xd2)]('overA')[_0x2b1754(0xb9)]),_0x422814=0x1/parseFloat(document[_0x2b1754(0xd2)](_0x2b1754(0xc9))['value']),_0x317b23=parseFloat(document[_0x2b1754(0xd2)](_0x2b1754(0xb2))[_0x2b1754(0xb9)]),_0x8e4415=0x1/parseFloat(document[_0x2b1754(0xd2)](_0x2b1754(0xcc))[_0x2b1754(0xb9)]),_0x457866=0x1/parseFloat(document[_0x2b1754(0xd2)](_0x2b1754(0xc0))['value']),_0x23130b=_0x232c39+_0x422814;_0x232c39=_0x232c39/_0x23130b,_0x422814=_0x422814/_0x23130b;const _0x1e0cc0=[0x1];target_prob=_0x422814,target_line=_0xbe73c7;const _0x3b6089=fmin[_0x2b1754(0xcf)](poissonError,_0x1e0cc0);console[_0x2b1754(0xd7)](_0x3b6089);let _0x4b74c1=_0x8e4415+_0x457866;_0x8e4415=_0x8e4415/_0x4b74c1,_0x457866=_0x457866/_0x4b74c1,target_prob=0x0,target_line=0x0;const _0x30da97=[0x1];target_prob=_0x457866,target_line=_0x317b23;const _0x19a209=fmin[_0x2b1754(0xcf)](poissonError,_0x30da97);console['log'](_0x19a209),document[_0x2b1754(0xd2)](_0x2b1754(0xb0))['innerHTML']=_0x2b1754(0xcd)+_0xbe73c7+')\x20=\x20'+(_0x422814*0x64)[_0x2b1754(0xd3)](0x2)+'%</span><br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>Odds\x20(A>'+_0xbe73c7+_0x2b1754(0xb1)+(_0x232c39*0x64)[_0x2b1754(0xd3)](0x2)+_0x2b1754(0xd9)+_0x3b6089['x'][0x0][_0x2b1754(0xd3)](0x4)+_0x2b1754(0xbb)+_0x317b23+_0x2b1754(0xb1)+(_0x457866*0x64)['toFixed'](0x2)+_0x2b1754(0xb4)+_0x317b23+_0x2b1754(0xb1)+(_0x8e4415*0x64)[_0x2b1754(0xd3)](0x2)+_0x2b1754(0xc6)+_0x19a209['x'][0x0][_0x2b1754(0xd3)](0x4)+_0x2b1754(0xda);}

    </script>
</body>
</html>
