<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js"></script>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/bessel@1.0.2/bessel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/fmin@0.0.2/build/fmin.min.js"></script>
    <title>Betting Odds to Goal Projection Conversion</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Football Tools</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav">
                <li class="nav-item active">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Odds to Score <span class="sr-only">(current)</span></a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container mt-5">
        <div class="jumbotron">

            <h2>Convert Win Probabilities to Projected Goals</h2>
            <div><span>This tool assumes scores for both teams are Poisson random variables.</span></div>
            <form id="inputForm">
                
                <label for="one_minus_cdf_0">A > B (Team A to Win)</label><br>
                <input type="number" id="one_minus_cdf_0" name="one_minus_cdf_0" step="0.01" min="0.01" max="1" required><br><br>

                <label for="pmf_0">A = B (Draw/Tie)</label><br>
                <input type="number" id="pmf_0" name="pmf_0" step="0.01" min="0.01" max="1" required><br><br>
                

                <label for="cdf_neg1">A < B (Team B to Win)</label><br>
                <input type="number" id="cdf_neg1" name="cdf_neg1" step="0.01" min="0.01" max="1" required><br><br>

                <button type="button" class="btn btn-primary" onclick="estimateParameters()">Estimate Parameters</button>
            </form>

            <h3>Estimated Parameters</h3>
            <p id="result"></p>

            <hr>

            <h2>Convert Decimal Odds to Projected Goals</h2>
            <div><span>This tool assumes scores for both teams are Poisson random variables.</span></div><br>
            <form id="inputForm2">
                <label for="oddsA">Team A</label><br>
                <input type="number" id="oddsA" name="oddsA" step="0.01" required><br><br>
                <label for="oddsTie">Tie/Draw</label><br>
                <input type="number" id="oddsTie" name="oddsTie" step="0.01" required><br><br>
                <label for="oddsB">Team B</label><br>
                <input type="number" id="oddsB" name="oddsB" step="0.01" required><br><br>
                <button type="button" class="btn btn-primary" onclick="estimateParametersOdds()">Estimate Parameters</button>
            </form>

            <h3>Estimated Parameters</h3>
            <p id="resultImpliedOdds"></p>
            <p id="resultOdds"></p>
        </div>
    </div>

    <script>

        (function(_0x43f495,_0x12dd23){const _0x2917db=_0x5926,_0x43cbd6=_0x43f495();while(!![]){try{const _0x4b358c=-parseInt(_0x2917db(0xea))/0x1*(parseInt(_0x2917db(0xe3))/0x2)+parseInt(_0x2917db(0xda))/0x3*(-parseInt(_0x2917db(0xeb))/0x4)+parseInt(_0x2917db(0xd8))/0x5*(parseInt(_0x2917db(0xd5))/0x6)+-parseInt(_0x2917db(0xe7))/0x7*(parseInt(_0x2917db(0xd6))/0x8)+parseInt(_0x2917db(0xd3))/0x9+-parseInt(_0x2917db(0xe6))/0xa+parseInt(_0x2917db(0xd9))/0xb*(parseInt(_0x2917db(0xdd))/0xc);if(_0x4b358c===_0x12dd23)break;else _0x43cbd6['push'](_0x43cbd6['shift']());}catch(_0x2daefd){_0x43cbd6['push'](_0x43cbd6['shift']());}}}(_0x2a58,0xf17cb));let p1=0x0,p2=0x0,p3=0x0,oddA=0x0,oddTie=0x0,oddB=0x0;function besseli(_0xcef760,_0x2087d3){const _0x47bc9e=_0x5926;return BESSEL[_0x47bc9e(0xf1)](_0x2087d3,_0xcef760);}function skellamCDF(_0x3761f7,_0x316b54,_0x2d807f){let _0x52a55e=0x0;for(let _0x484583=-0x64;_0x484583<=_0x3761f7;_0x484583++){_0x52a55e+=skellamPMF(_0x484583,_0x316b54,_0x2d807f);}return _0x52a55e;}function skellamPMF(_0x49890b,_0x306c75,_0x56c85f){const _0x20dc1f=_0x5926;return _0x49890b<0x0?Math[_0x20dc1f(0xf0)](-(_0x56c85f+_0x306c75))*Math[_0x20dc1f(0xe9)](_0x56c85f/_0x306c75,_0x49890b/0x2)*besseli(-_0x49890b,0x2*Math[_0x20dc1f(0xf2)](_0x56c85f*_0x306c75)):Math[_0x20dc1f(0xf0)](-(_0x306c75+_0x56c85f))*Math[_0x20dc1f(0xe9)](_0x306c75/_0x56c85f,_0x49890b/0x2)*besseli(_0x49890b,0x2*Math[_0x20dc1f(0xf2)](_0x306c75*_0x56c85f));}function objectiveX(_0x10dda4){const _0x182cad=_0x5926,_0x354c03=_0x10dda4[0x0],_0x41170a=_0x10dda4[0x1];if(_0x354c03<=0x0||_0x41170a<=0x0)return Infinity;const _0x491057=skellamCDF(-0x1,_0x354c03,_0x41170a),_0x250e49=skellamPMF(0x0,_0x354c03,_0x41170a),_0x296a0c=0x1-skellamCDF(0x0,_0x354c03,_0x41170a),_0x4b9902=Math[_0x182cad(0xe9)](_0x491057-p1,0x2)+Math['pow'](_0x250e49-p2,0x2)+Math[_0x182cad(0xe9)](_0x296a0c-p3,0x2);return console['log']([..._0x10dda4,_0x4b9902]),_0x4b9902;}function estimateParameters(){const _0x45ed8a=_0x5926;let _0x57d122=parseFloat(document['getElementById'](_0x45ed8a(0xee))[_0x45ed8a(0xd7)]),_0x59e07e=parseFloat(document[_0x45ed8a(0xed)](_0x45ed8a(0xec))[_0x45ed8a(0xd7)]),_0x33ad6a=parseFloat(document[_0x45ed8a(0xed)](_0x45ed8a(0xd2))[_0x45ed8a(0xd7)]);p1=_0x57d122/(_0x57d122+_0x59e07e+_0x33ad6a),p2=_0x59e07e/(_0x57d122+_0x59e07e+_0x33ad6a),p3=_0x33ad6a/(_0x57d122+_0x59e07e+_0x33ad6a);const _0x1c62b7=[0x1,0x1],_0x50248d=fmin[_0x45ed8a(0xdb)](objectiveX,_0x1c62b7,{'maxIterations':0x7d0,'zeroDelta':0.0001}),_0x275d04=_0x50248d['x'][0x1],_0x47c0c7=_0x50248d['x'][0x0];document[_0x45ed8a(0xed)](_0x45ed8a(0xe2))[_0x45ed8a(0xde)]=_0x45ed8a(0xdf)+_0x275d04[_0x45ed8a(0xe0)](0x4)+'<br>Goal\x20Rate\x20for\x20Team\x20B\x20(Lambda\x20B):\x20'+_0x47c0c7['toFixed'](0x4);}function estimateParametersOdds(){const _0x3b4961=_0x5926;let _0x539c45=parseFloat(document[_0x3b4961(0xed)](_0x3b4961(0xe5))[_0x3b4961(0xd7)]),_0x206353=parseFloat(document['getElementById'](_0x3b4961(0xe1))[_0x3b4961(0xd7)]),_0x3b2c49=parseFloat(document[_0x3b4961(0xed)]('oddsB')[_0x3b4961(0xd7)]),_0x4ee8f8=0x1/_0x539c45,_0x31348a=0x1/_0x206353,_0x234cd7=0x1/_0x3b2c49;p3=_0x4ee8f8/(_0x4ee8f8+_0x31348a+_0x234cd7),p2=_0x31348a/(_0x4ee8f8+_0x31348a+_0x234cd7),p1=_0x234cd7/(_0x4ee8f8+_0x31348a+_0x234cd7);const _0x4e38c4=[0x1,0x1],_0xc26cf6=fmin[_0x3b4961(0xdb)](objectiveX,_0x4e38c4,{'maxIterations':0x7d0,'zeroDelta':0.0001}),_0x23566a=_0xc26cf6['x'][0x1],_0x1524cf=_0xc26cf6['x'][0x0];document[_0x3b4961(0xed)](_0x3b4961(0xe4))[_0x3b4961(0xde)]=_0x3b4961(0xdc)+(p3*0x64)[_0x3b4961(0xe0)](0x2)+_0x3b4961(0xe8)+(p2*0x64)[_0x3b4961(0xe0)](0x2)+_0x3b4961(0xd4)+(p1*0x64)[_0x3b4961(0xe0)](0x2)+'%',document[_0x3b4961(0xed)](_0x3b4961(0xef))[_0x3b4961(0xde)]='Goal\x20Rate\x20for\x20Team\x20A\x20(Lambda\x20A):\x20'+_0x23566a['toFixed'](0x4)+'<br>Goal\x20Rate\x20for\x20Team\x20B\x20(Lambda\x20B):\x20'+_0x1524cf[_0x3b4961(0xe0)](0x4);}function _0x5926(_0x47f53d,_0x5f079c){const _0x2a588c=_0x2a58();return _0x5926=function(_0x5926da,_0x224030){_0x5926da=_0x5926da-0xd2;let _0xca7b79=_0x2a588c[_0x5926da];return _0xca7b79;},_0x5926(_0x47f53d,_0x5f079c);}function _0x2a58(){const _0x521521=['18wfvanC','3741216bxDkqB','value','2838090airfLO','1540nUcIWx','21QqRdGa','nelderMead','Implied\x20Odds,\x20A:\x20','876RDxWMr','innerHTML','Goal\x20Rate\x20for\x20Team\x20A\x20(Lambda\x20A):\x20','toFixed','oddsTie','result','4726VTHask','resultImpliedOdds','oddsA','2226050gAxAPP','7gQZCik','%,\x20Tie:\x20','pow','419aGZYRo','506668nUGyyI','pmf_0','getElementById','cdf_neg1','resultOdds','exp','besseli','sqrt','one_minus_cdf_0','16587720zbrmvC','%,\x20B:\x20'];_0x2a58=function(){return _0x521521;};return _0x2a58();}

    </script>
</body>
</html>
